<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<title>תצוגת עיצוב עם משתנים</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family: Arial, sans-serif; transition: background-color 0.2s; }
  .btn { cursor: pointer; padding: 8px 14px; border-radius: 12px; border: 1px solid #ccc; 
         background-color: #e0e0e0; color: #000; font-size: 14px; font-family: Arial, sans-serif;
         transition: transform .12s ease, box-shadow .12s ease, background-color .2s, color .2s; }
  .btn:hover { transform: translateY(-2px); box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
  .selected-outline { outline: 3px solid #f59e0b; outline-offset: 3px; }
  .small-label { font-size: 0.9rem; color: #555; }
  .variable-box { background: #f9f9f9; border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; }
</style>
</head>
<body>

<script>
  window.__DESIGN = {{ design_settings | tojson | safe }};
</script>

<div class="p-6">

  <h1 class="text-2xl font-bold mb-4">ערכי עיצוב נוכחיים</h1>
  <div id="variablesContainer"></div>

  <h2 class="text-xl font-semibold mt-6 mb-2">כפתורי יום</h2>
  <div class="grid grid-cols-7 gap-3 mb-6" id="daysRow">
    {% for i in range(7) %}
      <button class="btn day-btn" data-type="day">DAY</button>
    {% endfor %}
  </div>

  <h2 class="text-xl font-semibold mb-2">כפתורי שעה</h2>
  <div class="grid grid-cols-5 gap-3" id="slotsGrid">
    {% for i in range(20) %}
      <button class="btn slot-btn" data-type="slot">HOUR</button>
    {% endfor %}
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', ()=> {
  const DS = window.__DESIGN || {};

  function rgbToHex(rgb){
    if (!rgb) return '#000000';
    if (rgb.startsWith('#')) return rgb;
    const m = rgb.match(/\d+/g);
    return '#' + m.slice(0,3).map(x=>{const h=parseInt(x).toString(16); return h.length===1?'0'+h:h}).join('');
  }

  // צבע רקע גוף
  if(DS.body_background_color) document.body.style.backgroundColor = DS.body_background_color;

  // הצגת כל המשתנים למעלה
  const variablesContainer = document.getElementById('variablesContainer');
  const keys = Object.keys(DS);
  if(keys.length === 0) {
    variablesContainer.innerHTML = "<p>אין ערכי עיצוב מוגדרים</p>";
  } else {
    keys.forEach(k=>{
      const val = DS[k] || '---';
      const box = document.createElement('div');
      box.className = 'variable-box';
      box.textContent = `${k}: ${val}`;
      variablesContainer.appendChild(box);
    });
  }

  // הגדרת כפתורי יום
  document.querySelectorAll('.day-btn').forEach(btn=>{
    if(DS.day_button_color) btn.style.backgroundColor = DS.day_button_color;
    if(DS.day_button_text_color) btn.style.color = DS.day_button_text_color;
    if(DS.day_button_shape) btn.style.borderRadius = DS.day_button_shape;
    if(DS.day_button_font_family) btn.style.fontFamily = DS.day_button_font_family;
    if(DS.day_button_text_size) btn.style.fontSize = DS.day_button_text_size;
    if(DS.day_button_size) { btn.style.paddingTop = DS.day_button_size; btn.style.paddingBottom = DS.day_button_size; }
  });

  // הגדרת כפתורי שעה
  document.querySelectorAll('.slot-btn').forEach(btn=>{
    if(DS.slot_button_color) btn.style.backgroundColor = DS.slot_button_color;
    if(DS.slot_button_text_color) btn.style.color = DS.slot_button_text_color;
    if(DS.slot_button_shape) btn.style.borderRadius = DS.slot_button_shape;
    if(DS.slot_button_font_family) btn.style.fontFamily = DS.slot_button_font_family;
    if(DS.slot_button_text_size) btn.style.fontSize = DS.slot_button_text_size;
    if(DS.slot_button_size) { btn.style.paddingTop = DS.slot_button_size; btn.style.paddingBottom = DS.slot_button_size; }
  });

});
</script>
</body>
</html>
